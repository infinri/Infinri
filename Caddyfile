# Caddy Configuration for Infinri Portfolio
{
	admin off
	
	servers {
		protocols h1 h2
		
		# Minimal timeouts
		timeouts {
			read_body 30s
			read_header 10s
			write 30s
			idle 20s
		}
		
		max_header_size 16KB
	}
	
	log {
		output discard
	}
}

# Local development
:8080 {
	root * /home/infinri/Initrix/Projects/Portfolio/pub
	
	encode gzip
	
	php_fastcgi unix//run/php/php8.4-fpm.sock
	
	file_server

	header Cache-Control "public, max-age=31536000"

	header {
		X-Content-Type-Options "nosniff"
		Referrer-Policy "strict-origin-when-cross-origin"
		-Server
	}

	@hidden {
		path_regexp hidden ^/\.
	}
	respond @hidden 403
}

# Production domain (uncomment and configure when deploying)
# yourdomain.com {
#     root * /var/www/portfolio/pub
#     
#     encode zstd gzip
#     
#     php_fastcgi unix//run/php/php8.4-fpm.sock {
#         resolve_root_symlink
#     }
#     
#     file_server
#     
#     @static {
#         path *.css *.js *.jpg *.jpeg *.png *.gif *.svg *.webp *.woff *.woff2 *.ttf *.eot *.ico
#     }
#     header @static Cache-Control "public, max-age=31536000, immutable"
#     
#     header {
#         X-Content-Type-Options "nosniff"
#         X-Frame-Options "DENY"
#         Referrer-Policy "strict-origin-when-cross-origin"
#         -Server
#     }
#     
#     @hidden {
#         path_regexp hidden ^/\.
#     }
#     respond @hidden 403
#
#     log {
#         output file /var/log/caddy/portfolio.log
#         format json
#         level ERROR
#     }
# }
