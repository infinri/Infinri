#!/usr/bin/env php
<?php
declare(strict_types=1);

/**
 * Console Application
 * 
 * Command-line interface for project management
 */

// Bootstrap
require_once __DIR__ . '/../vendor/autoload.php';

use App\Core\Console\Application;
use App\Core\Console\Commands\AssetsPublishCommand;
use App\Core\Console\Commands\AssetsClearCommand;
use App\Core\Console\Commands\AssetsBuildCommand;

try {
    $app = new Application();
    
    // Register Core asset commands
    $app->register('assets:publish', AssetsPublishCommand::class);
    $app->register('assets:clear', AssetsClearCommand::class);
    $app->register('assets:build', AssetsBuildCommand::class);
    $app->alias('a:pub', 'assets:publish');
    $app->alias('a:clear', 'assets:clear');
    $app->alias('a:build', 'assets:build');
    
    $exitCode = $app->run($argv);
    exit($exitCode);
} catch (Throwable $e) {
    echo "Error: " . $e->getMessage() . PHP_EOL;
    exit(1);
}
